{% extends "base.html" %}
{% load correction_tags %}

{% block form %}

	<!-- https://materializecss.com/tooltips.html -->
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function() {
			var elems = document.querySelectorAll('.tooltipped');
			var instances = M.Tooltip.init(elems);
		});
	</script>

	<div class="row">
		<div class="col s12">
			{% if not documents.items %}
				<h5>No results</h5>
			{% endif %}
			{% if corrections %}
				{% for word,replacements in corrections.items %}
					<p>You tried: <b>{{ word }}</b>. Did you mean:
					{% for possibility in replacements %}
						<a href="?{% word_replace word possibility %}">{{possibility}}</a> 
					{% endfor %}
					</p>
				{% endfor %}
			{% endif %}

			{% for id,doc in documents.items %}
				<div class="section">
					<h5>
						<a
							{% if doc.1 %}
								class="tooltipped" data-position="top" data-tooltip="Score: {{doc.1|floatformat:'3'}}"
							{% endif %} 
							href="/document/{{collection}}/{{id}}">{{doc.0.title}}
						</a>
					</h5>
					{% if doc.0.body %}
						<p>
							{{doc.0.body|slice:100}}
							{% if doc.0.body|length > 100 %}
								...
							{% endif %}
						</p>

					{% endif %}
				</div>
				<div class="divider"></div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
